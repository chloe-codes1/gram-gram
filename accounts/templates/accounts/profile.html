{% extends 'base.html' %}
{% load bootstrap4 %}
{% load article_extras%}
{% block content %}

<div class="d-flex justify-content-between">
    <h1>{{ person.username }}'s Profile</h1>
    
    
    <div class="d-flex">
        <div class="text-center d-inline px-2">
            <p class="text-center ">{{person.article_set.count}}</p>
            <p class="text-center ">Posts</p>
        </div>
        <div class="text-center d-inline px-2">
            <p class="text-center">{{person.followers.count}}</p>
            <p class="text-center">Followers</p>
        </div>
        <div class="text-center d-inline px-2">
            <p class="text-center ">{{person.followings.count}}</p>
            <p class="text-center ">Following</p>
        </div>
    </div>
</div>

<p class="my-2">
{% if request.username == person.username %}

    <a href="{% url 'follow' person.username %}" class="d-block w-50 m-auto btn btn-warning text-white">
        <strong>Edit Profile</strong>
    </a>

{% else %}
    
        <a href="{% url 'follow' person.username %}" class="d-block w-50 m-auto btn btn-warning text-white"> 
            <strong>
            {% if request.user in person.followers.all %}
                Following
            {% else %}
                Follow
            {% endif %}
            </strong>
        </a>
    
{% endif %}
</p>
    <h2>Posts</h2>

{% for article in person.article_set.all%}
<div class="card m-auto d-flex" style="width: 20rem;">
  <div class="card-header d-flex justify-content-between"> 
  <h5 class="card-title"><a href="{% url 'profile' article.user.username %}" class="text-success"><strong>{{ article.user.username }}</strong></a> </h5>
  <div>
    <span>{% include 'articles/like.html'%}</span>
    <span>{{article.liked_users.count}} likes</span>
  </div>
  </div>

  <div class="card-body d-inline">
    <img src="{{article.image_thumbnail.url}}" class="d-block m-auto pb-2" width="350"/>
    <h5 class="card-title">#{{article.pk}} - {{article.title}}</h5>
    <p>{{article|add_link|safe|linebreaksbr}}</p>
    <p><small>{{ article.created_at|date:'Y-m-d H:i' }}</small></p>
  </div>
  </div>

  {% empty %}
  <h3 class="text-center pt-5 mb-3">There is no post!</h3>
  <p class="text-center pb-2">Upload your first gram-gram photo today.</p>
  <a class="btn btn-warning text-white d-block w-25 m-auto" href="{% url 'articles:create' %}" style='font-size:22px;'><strong>Write a Post</strong> </a>

    {% endfor %}
{% endblock %}